var app=angular.module("documentManagerApp",["ui.router","ngMaterial","ngMessages","ngAnimate","ngAria","ngMdIcons","ngStorage"]);app.config(["$stateProvider","$httpProvider","$urlRouterProvider","$locationProvider","$mdThemingProvider",function(e,t,r,o,n,a){e.state("home",{url:"/",views:{"":{templateUrl:"partials/nav-view.html"},"homeView@home":{templateUrl:"partials/home-view.html",controller:"MainCtrl"},"aboutView@home":{templateUrl:"partials/about-view.html",controller:"MainCtrl"}}}).state("login",{url:"/login",views:{"":{templateUrl:"partials/nav-view.html"},"homeView@login":{templateUrl:"partials/login-view.html",controller:"UserCtrl"}}}).state("signup",{url:"/signup",views:{"":{templateUrl:"partials/nav-view.html"},"homeView@signup":{templateUrl:"partials/signup-view.html",controller:"UserCtrl"}}}).state("userhome",{url:"/userhome",views:{"":{templateUrl:"partials/usernav-view.html",controller:"UserCtrl"},"docView@userhome":{templateUrl:"partials/userHome-view.html",controller:"docCtrl"}}}).state("all-docs",{url:"/all-docs",views:{"":{templateUrl:"partials/usernav-view.html",controller:"UserCtrl"},"docView@all-docs":{templateUrl:"partials/alldoc-view.html",controller:"docCtrl"}}}).state("view-profile",{url:"/view-profile",views:{"":{templateUrl:"partials/usernav-view.html",controller:"UserCtrl"},"docView@view-profile":{templateUrl:"partials/userProfile-view.html",controller:"UserCtrl"}}}).state("edit-profile",{url:"/edit-profile",views:{"":{templateUrl:"partials/usernav-view.html",controller:"UserCtrl"},"docView@edit-profile":{templateUrl:"partials/userProfileEdit-view.html",controller:"UserCtrl"}}}),r.otherwise("/"),o.html5Mode(!0);var s={50:"#ffffff",100:"#ffffff",200:"#ffffff",300:"#ffffff",400:"#ffffff",500:"#ffffff",600:"#f2f2f2",700:"#e6e6e6",800:"#d9d9d9",900:"#cccccc",A100:"#ffffff",A200:"#ffffff",A400:"#ffffff",A700:"#bfbfbf"};n.definePalette("newPrimary",s),n.theme("default").primaryPalette("newPrimary").accentPalette("light-blue").warnPalette("red").backgroundPalette("newPrimary"),t.interceptors.push(["$q","$location","$localStorage",function(e,t,r){return{request:function(e){return e.headers=e.headers||{},r.userToken&&(e.headers["x-access-token"]=r.userToken),e},responseError:function(r){return(401===r.status||403===r.status)&&t.path("/signin"),e.reject(r)}}}])}]),angular.module("documentManagerApp").controller("docCtrl",["docService","$rootScope","$window","$scope","$location","$mdDialog","$localStorage",function(e,t,r,o,n,a,s){function i(r,o){r.createDocument=function(){var o={title:r.title,content:r.content,user:s.activeUser.username};e.addDocument(o).success(function(e){t.displayStatus(e.message)}).error(function(e){t.displayError(e.message+"try, again")})},r.hide=function(){o.hide()},r.cancel=function(){o.cancel()}}o.getAllDocuments=function(){e.getAllDocuments().success(function(e){o.Documents=e}).error(function(e){o.getErrorMessage=e.message})},o.getOneDocument=function(r){var n=o.id;e.getOneDocument(n).success(function(e){o.Document=e,s.currentDoc=e}).error(function(e){t.displayError(e.message)})},o.getAllUserDocuments=function(){var r=s.activeUser._id;e.getAllUserDocuments(r).success(function(e){o.userDocuments=e}).error(function(e){t.displayError(e.message)})},o.editDocument=function(){var r=o.id,n={title:o.title,content:o.content};e.updateDocument(r,n).success(function(e){t.displayStatus(e.message)}).error(function(e){t.displayError(e.message+"try, again")})},o.deleteDocument=function(){var r=o.id;e.deleteDocument(r).success(function(e){t.displayStatus(e.message)}).error(function(e){t.displayError(e.message+"try, again")})},t.showDocDialog=function(e){a.show({controller:i,templateUrl:"../../partials/docDialog-view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})},o.currentDoc=s.currentDoc}]),angular.module("documentManagerApp").controller("MainCtrl",["$state","$rootScope","$scope","$mdToast",function(e,t,r,o){t.displayStatus=function(e){o.show(o.simple().content(e).position("top right").hideDelay(2e3))},t.displayError=function(e){o.show({template:'<md-toast style="background:#dc145c; color:#ffffff">'+e+"</md-toast>",hideDelay:3e3,position:"top right"})}}]),angular.module("documentManagerApp").controller("UserCtrl",["UserService","$rootScope","$state","$scope","$location","$mdSidenav","$localStorage",function(e,t,r,o,n,a,s){o.signin=function(){var n={username:o.username,password:o.password};e.login(n).success(function(e){s.activeUser=e.user,s.userToken=e.token,t.displayStatus(e.message),r.go("userhome")}).error(function(e){t.displayError(e.message),r.go("login")})},o.signup=function(){var n={name:{first:o.firstname,last:o.lastname},username:o.username,email:o.email,password:o.password};e.signup(n).success(function(e){t.displayStatus(e.message),r.go("login")}).error(function(e){t.displayError(e.message+"try, again")})},o.logout=function(){s.$reset(),e.logout().success(function(e){t.displayStatus(e.message),r.go("home")}).error(function(e){t.displayError(e.message)})},t.getUserDetails=function(){var r=s.activeUser._id;e.getUser(r).success(function(e){o.userDetails=e}).error(function(e){t.displayError(e.message)})},o.deleteUser=function(){var o=s.activeUser._id;e.deleteUser(o).success(function(e){t.displayStatus(e.message),r.go("home")}).error(function(e){t.displayStatus(e.message)})},o.toggleSideNav=function(e){a(e).toggle()},o.updateUser=function(){var n=s.activeUser._id,a={username:o.username,email:o.email,password:o.password,name:{first:o.firstname,last:o.lastname}};e.updateUserData(n,a).success(function(e){t.displayStatus(e.message),r.go("userhome")}).error(function(e){t.displayError(e.message+"try, again")})},o.redirect=function(e){return r.go(e)}}]);var app=angular.module("documentManagerApp");app.factory("docService",["$http","baseUrl",function(e,t){var r={addDocument:function(r){return e.post(t+"/api/documents",r)},getAllDocuments:function(){return e.get(t+"/api/documents")},getOneDocument:function(r){return e.get(t+"/api/documents/"+r)},getAllUserDocuments:function(r){return e.get(t+"/api/users/"+r+"/documents")},updateDocument:function(r,o){return e.put(t+"/api/documents/"+r,o)},deleteDocument:function(r,o,n){return e["delete"](t+"/api/documents/"+r)}};return r}]);var app=angular.module("documentManagerApp");app.value("baseUrl","http://localhost:3000"),app.factory("UserService",["$http","baseUrl",function(e,t){var r={login:function(r){return e.post(t+"/api/users/login",r)},logout:function(){return e.post(t+"/api/users/logout")},signup:function(r){return e.post(t+"/api/users/",r)},getUser:function(r){return e.get(t+"/api/users/"+r)},updateUserData:function(r,o){return e.put(t+"/api/users/"+r,o)},deleteUser:function(r,o){return e["delete"](t+"/api/users/"+r)}};return r}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL2RvY3VtZW50LWNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9tYWluLWNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy91c2VyLWNvbnRyb2xsZXIuanMiLCJzZXJ2aWNlcy9kb2N1bWVudC1zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL3VzZXItc2VydmljZXMuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwicGFsbGV0ZXMiLCJzdGF0ZSIsInVybCIsInZpZXdzIiwiIiwidGVtcGxhdGVVcmwiLCJob21lVmlld0Bob21lIiwiY29udHJvbGxlciIsImFib3V0Vmlld0Bob21lIiwiaG9tZVZpZXdAbG9naW4iLCJob21lVmlld0BzaWdudXAiLCJkb2NWaWV3QHVzZXJob21lIiwiZG9jVmlld0BhbGwtZG9jcyIsImRvY1ZpZXdAdmlldy1wcm9maWxlIiwiZG9jVmlld0BlZGl0LXByb2ZpbGUiLCJvdGhlcndpc2UiLCJodG1sNU1vZGUiLCJuZXdQcmltYXJ5IiwiNTAiLCIxMDAiLCIyMDAiLCIzMDAiLCI0MDAiLCI1MDAiLCI2MDAiLCI3MDAiLCI4MDAiLCI5MDAiLCJBMTAwIiwiQTIwMCIsIkE0MDAiLCJBNzAwIiwiZGVmaW5lUGFsZXR0ZSIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2FyblBhbGV0dGUiLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsImludGVyY2VwdG9ycyIsInB1c2giLCIkcSIsIiRsb2NhdGlvbiIsIiRsb2NhbFN0b3JhZ2UiLCJyZXF1ZXN0IiwiaGVhZGVycyIsInVzZXJUb2tlbiIsInJlc3BvbnNlRXJyb3IiLCJyZXNwb25zZSIsInN0YXR1cyIsInBhdGgiLCJyZWplY3QiLCJkb2NTZXJ2aWNlIiwiJHJvb3RTY29wZSIsIiR3aW5kb3ciLCIkc2NvcGUiLCIkbWREaWFsb2ciLCJkb2NEaWFsb2dDdHJsIiwiY3JlYXRlRG9jdW1lbnQiLCJkYXRhIiwidGl0bGUiLCJjb250ZW50IiwidXNlciIsImFjdGl2ZVVzZXIiLCJ1c2VybmFtZSIsImFkZERvY3VtZW50Iiwic3VjY2VzcyIsInJlcyIsImRpc3BsYXlTdGF0dXMiLCJtZXNzYWdlIiwiZXJyb3IiLCJlcnIiLCJkaXNwbGF5RXJyb3IiLCJoaWRlIiwiY2FuY2VsIiwiZ2V0QWxsRG9jdW1lbnRzIiwiRG9jdW1lbnRzIiwiZ2V0RXJyb3JNZXNzYWdlIiwiZ2V0T25lRG9jdW1lbnQiLCJpZCIsImRvY0lkIiwiRG9jdW1lbnQiLCJjdXJyZW50RG9jIiwiZ2V0QWxsVXNlckRvY3VtZW50cyIsInVzZXJJZCIsIl9pZCIsInVzZXJEb2N1bWVudHMiLCJlZGl0RG9jdW1lbnQiLCJ1cGRhdGVEb2N1bWVudCIsImRlbGV0ZURvY3VtZW50Iiwic2hvd0RvY0RpYWxvZyIsImVudiIsInNob3ciLCJwYXJlbnQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJib2R5IiwidGFyZ2V0RXZlbnQiLCJjbGlja091dHNpZGVUb0Nsb3NlIiwiJHN0YXRlIiwiJG1kVG9hc3QiLCJzaW1wbGUiLCJwb3NpdGlvbiIsImhpZGVEZWxheSIsInRlbXBsYXRlIiwiVXNlclNlcnZpY2UiLCIkbWRTaWRlbmF2Iiwic2lnbmluIiwicGFzc3dvcmQiLCJsb2dpbiIsInRva2VuIiwiZ28iLCJzaWdudXAiLCJuYW1lIiwiZmlyc3QiLCJmaXJzdG5hbWUiLCJsYXN0IiwibGFzdG5hbWUiLCJlbWFpbCIsImxvZ291dCIsIiRyZXNldCIsImdldFVzZXJEZXRhaWxzIiwiZ2V0VXNlciIsInVzZXJEZXRhaWxzIiwiZGVsZXRlVXNlciIsInRvZ2dsZVNpZGVOYXYiLCJJZCIsInRvZ2dsZSIsInVwZGF0ZVVzZXIiLCJ1cGRhdGVVc2VyRGF0YSIsInJlZGlyZWN0IiwicGFnZSIs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SUFJQSxPQUFBNEQiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdkb2N1bWVudE1hbmFnZXJBcHAnLCBbJ3VpLnJvdXRlcicsICduZ01hdGVyaWFsJywgJ25nTWVzc2FnZXMnLCAnbmdBbmltYXRlJywgJ25nQXJpYScsICduZ01kSWNvbnMnLCAnbmdTdG9yYWdlJ10pO1xuXG5hcHAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCAnJGh0dHBQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCAnJG1kVGhlbWluZ1Byb3ZpZGVyJyxcbiAgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICRodHRwUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIsICRtZFRoZW1pbmdQcm92aWRlciwgcGFsbGV0ZXMpIHtcblxuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICAgIHVybDogXCIvXCIsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJyc6IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvbmF2LXZpZXcuaHRtbCdcbiAgICAgICAgICB9LFxuICAgICAgICAgICdob21lVmlld0Bob21lJzoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9ob21lLXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTWFpbkN0cmwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnYWJvdXRWaWV3QGhvbWUnOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2Fib3V0LXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTWFpbkN0cmwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgLnN0YXRlKCdsb2dpbicsIHtcbiAgICAgICAgdXJsOiBcIi9sb2dpblwiLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICcnOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL25hdi12aWV3Lmh0bWwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnaG9tZVZpZXdAbG9naW4nOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2xvZ2luLXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckN0cmwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnN0YXRlKCdzaWdudXAnLCB7XG4gICAgICAgIHVybDogXCIvc2lnbnVwXCIsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJyc6IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvbmF2LXZpZXcuaHRtbCdcbiAgICAgICAgICB9LFxuICAgICAgICAgICdob21lVmlld0BzaWdudXAnOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3NpZ251cC12aWV3Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1VzZXJDdHJsJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgndXNlcmhvbWUnLCB7XG4gICAgICAgIHVybDogXCIvdXNlcmhvbWVcIixcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy91c2VybmF2LXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckN0cmwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnZG9jVmlld0B1c2VyaG9tZSc6IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvdXNlckhvbWUtdmlldy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdkb2NDdHJsJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnYWxsLWRvY3MnLCB7XG4gICAgICAgIHVybDogXCIvYWxsLWRvY3NcIixcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy91c2VybmF2LXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckN0cmwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnZG9jVmlld0BhbGwtZG9jcyc6IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvYWxsZG9jLXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnZG9jQ3RybCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ3ZpZXctcHJvZmlsZScsIHtcbiAgICAgICAgdXJsOiBcIi92aWV3LXByb2ZpbGVcIixcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy91c2VybmF2LXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckN0cmwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnZG9jVmlld0B2aWV3LXByb2ZpbGUnOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3VzZXJQcm9maWxlLXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckN0cmwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnN0YXRlKCdlZGl0LXByb2ZpbGUnLCB7XG4gICAgICAgIHVybDogXCIvZWRpdC1wcm9maWxlXCIsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJyc6IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvdXNlcm5hdi12aWV3Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1VzZXJDdHJsJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgJ2RvY1ZpZXdAZWRpdC1wcm9maWxlJzoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy91c2VyUHJvZmlsZUVkaXQtdmlldy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyQ3RybCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvXCIpO1xuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblxuICAgIHZhciBuZXdQcmltYXJ5ID0ge1xuICAgICAgJzUwJzogJyNmZmZmZmYnLFxuICAgICAgJzEwMCc6ICcjZmZmZmZmJyxcbiAgICAgICcyMDAnOiAnI2ZmZmZmZicsXG4gICAgICAnMzAwJzogJyNmZmZmZmYnLFxuICAgICAgJzQwMCc6ICcjZmZmZmZmJyxcbiAgICAgICc1MDAnOiAnI2ZmZmZmZicsXG4gICAgICAnNjAwJzogJyNmMmYyZjInLFxuICAgICAgJzcwMCc6ICcjZTZlNmU2JyxcbiAgICAgICc4MDAnOiAnI2Q5ZDlkOScsXG4gICAgICAnOTAwJzogJyNjY2NjY2MnLFxuICAgICAgJ0ExMDAnOiAnI2ZmZmZmZicsXG4gICAgICAnQTIwMCc6ICcjZmZmZmZmJyxcbiAgICAgICdBNDAwJzogJyNmZmZmZmYnLFxuICAgICAgJ0E3MDAnOiAnI2JmYmZiZidcbiAgICB9O1xuXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLmRlZmluZVBhbGV0dGUoJ25ld1ByaW1hcnknLCBuZXdQcmltYXJ5KTtcblxuICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXG4gICAgICAucHJpbWFyeVBhbGV0dGUoJ25ld1ByaW1hcnknKVxuICAgICAgLmFjY2VudFBhbGV0dGUoJ2xpZ2h0LWJsdWUnKVxuICAgICAgLndhcm5QYWxldHRlKCdyZWQnKVxuICAgICAgLmJhY2tncm91bmRQYWxldHRlKCduZXdQcmltYXJ5Jyk7XG5cbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKFsnJHEnLCAnJGxvY2F0aW9uJywgJyRsb2NhbFN0b3JhZ2UnLCBmdW5jdGlvbigkcSwgJGxvY2F0aW9uLCAkbG9jYWxTdG9yYWdlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAncmVxdWVzdCc6IGZ1bmN0aW9uKGNvbmZpZykge1xuICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG4gICAgICAgICAgaWYgKCRsb2NhbFN0b3JhZ2UudXNlclRva2VuKSB7XG4gICAgICAgICAgICBjb25maWcuaGVhZGVyc1sneC1hY2Nlc3MtdG9rZW4nXSA9ICRsb2NhbFN0b3JhZ2UudXNlclRva2VuO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICB9LFxuICAgICAgICAncmVzcG9uc2VFcnJvcic6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL3NpZ25pbicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XSk7XG5cbiAgfVxuXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnZG9jdW1lbnRNYW5hZ2VyQXBwJylcbiAgLmNvbnRyb2xsZXIoJ2RvY0N0cmwnLCBbJ2RvY1NlcnZpY2UnLCAnJHJvb3RTY29wZScsICckd2luZG93JywgJyRzY29wZScsICckbG9jYXRpb24nLCAnJG1kRGlhbG9nJywgJyRsb2NhbFN0b3JhZ2UnLFxuICAgIGZ1bmN0aW9uKGRvY1NlcnZpY2UsICRyb290U2NvcGUsICR3aW5kb3csICRzY29wZSwgJGxvY2F0aW9uLCAkbWREaWFsb2csICRsb2NhbFN0b3JhZ2UpIHtcblxuICAgICAgJHNjb3BlLmdldEFsbERvY3VtZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGRvY1NlcnZpY2UuZ2V0QWxsRG9jdW1lbnRzKCkuc3VjY2VzcyhmdW5jdGlvbihyZXMpIHtcblxuICAgICAgICAgICRzY29wZS5Eb2N1bWVudHMgPSByZXM7XG5cbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgJHNjb3BlLmdldEVycm9yTWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS5nZXRPbmVEb2N1bWVudCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgIHZhciBkb2NJZCA9ICRzY29wZS5pZDtcbiAgICAgICAgZG9jU2VydmljZS5nZXRPbmVEb2N1bWVudChkb2NJZCkuc3VjY2VzcyhmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAkc2NvcGUuRG9jdW1lbnQgPSByZXM7XG4gICAgICAgICAgJGxvY2FsU3RvcmFnZS5jdXJyZW50RG9jID0gcmVzO1xuICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLmRpc3BsYXlFcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLmdldEFsbFVzZXJEb2N1bWVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgdXNlcklkID0gJGxvY2FsU3RvcmFnZS5hY3RpdmVVc2VyLl9pZDtcbiAgICAgICAgZG9jU2VydmljZS5nZXRBbGxVc2VyRG9jdW1lbnRzKHVzZXJJZCkuc3VjY2VzcyhmdW5jdGlvbihyZXMpIHtcblxuICAgICAgICAgICRzY29wZS51c2VyRG9jdW1lbnRzID0gcmVzO1xuXG4gICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICRyb290U2NvcGUuZGlzcGxheUVycm9yKGVyci5tZXNzYWdlKTtcblxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS5lZGl0RG9jdW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGlkID0gJHNjb3BlLmlkO1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICB0aXRsZTogJHNjb3BlLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6ICRzY29wZS5jb250ZW50XG4gICAgICAgIH07XG4gICAgICAgIGRvY1NlcnZpY2UudXBkYXRlRG9jdW1lbnQoaWQsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS5kaXNwbGF5U3RhdHVzKHJlcy5tZXNzYWdlKTtcbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS5kaXNwbGF5RXJyb3IoZXJyLm1lc3NhZ2UgKyAndHJ5LCBhZ2FpbicpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS5kZWxldGVEb2N1bWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaWQgPSAkc2NvcGUuaWQ7XG4gICAgICAgIGRvY1NlcnZpY2UuZGVsZXRlRG9jdW1lbnQoaWQpLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS5kaXNwbGF5U3RhdHVzKHJlcy5tZXNzYWdlKTtcbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS5kaXNwbGF5RXJyb3IoZXJyLm1lc3NhZ2UgKyAndHJ5LCBhZ2FpbicpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgICRyb290U2NvcGUuc2hvd0RvY0RpYWxvZyA9IGZ1bmN0aW9uKGVudikge1xuICAgICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgICAgY29udHJvbGxlcjogZG9jRGlhbG9nQ3RybCxcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4uLy4uL3BhcnRpYWxzL2RvY0RpYWxvZy12aWV3Lmh0bWwnLFxuICAgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgICAgIHRhcmdldEV2ZW50OiBlbnYsXG4gICAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIGRvY0RpYWxvZ0N0cmwoJHNjb3BlLCAkbWREaWFsb2cpIHtcblxuICAgICAgICAkc2NvcGUuY3JlYXRlRG9jdW1lbnQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgdGl0bGU6ICRzY29wZS50aXRsZSxcbiAgICAgICAgICAgIGNvbnRlbnQ6ICRzY29wZS5jb250ZW50LFxuICAgICAgICAgICAgdXNlcjogJGxvY2FsU3RvcmFnZS5hY3RpdmVVc2VyLnVzZXJuYW1lXG5cbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIGRvY1NlcnZpY2UuYWRkRG9jdW1lbnQoZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuZGlzcGxheVN0YXR1cyhyZXMubWVzc2FnZSk7XG4gICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmRpc3BsYXlFcnJvcihlcnIubWVzc2FnZSArICd0cnksIGFnYWluJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJG1kRGlhbG9nLmNhbmNlbCgpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAkc2NvcGUuY3VycmVudERvYyA9ICRsb2NhbFN0b3JhZ2UuY3VycmVudERvYztcbiAgICB9XG5cblxuXG4gIF0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2RvY3VtZW50TWFuYWdlckFwcCcpXG4gIC5jb250cm9sbGVyKCdNYWluQ3RybCcsIFsnJHN0YXRlJywnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJG1kVG9hc3QnLFxuICAgIGZ1bmN0aW9uKCRzdGF0ZSwgJHJvb3RTY29wZSwgJHNjb3BlLCAkbWRUb2FzdCkge1xuXG4gICAgXHQvL2Rpc3BsYXkgcmVzcG9uc2Ugc3RhdHVzIG1lc3NhZ2VzIGlmIHN1Y2Vzc2Z1bFxuICAgICAgJHJvb3RTY29wZS5kaXNwbGF5U3RhdHVzID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgLmNvbnRlbnQobWVzc2FnZSlcbiAgICAgICAgICAucG9zaXRpb24oJ3RvcCByaWdodCcpXG4gICAgICAgICAgLmhpZGVEZWxheSgyMDAwKVxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgLy9kaXNwbGF5IGVycm9yIG1lc3NhZ2VzIGlmIHN1Y2Nlc3NmdWxcbiAgICAgICRyb290U2NvcGUuZGlzcGxheUVycm9yID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgICAkbWRUb2FzdC5zaG93KHtcbiAgICAgICAgICB0ZW1wbGF0ZTogJzxtZC10b2FzdCBzdHlsZT1cImJhY2tncm91bmQ6I2RjMTQ1YzsgY29sb3I6I2ZmZmZmZlwiPicgKyBtZXNzYWdlICsgJzwvbWQtdG9hc3Q+JyxcbiAgICAgICAgICBoaWRlRGVsYXk6IDMwMDAsXG4gICAgICAgICAgcG9zaXRpb246ICd0b3AgcmlnaHQnXG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIF0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2RvY3VtZW50TWFuYWdlckFwcCcpXG4gIC5jb250cm9sbGVyKCdVc2VyQ3RybCcsIFsnVXNlclNlcnZpY2UnLCAnJHJvb3RTY29wZScsICckc3RhdGUnLCAnJHNjb3BlJywgJyRsb2NhdGlvbicsICckbWRTaWRlbmF2JywgJyRsb2NhbFN0b3JhZ2UnLFxuICAgIGZ1bmN0aW9uKFVzZXJTZXJ2aWNlLCAkcm9vdFNjb3BlLCAkc3RhdGUsICRzY29wZSwgJGxvY2F0aW9uLCAkbWRTaWRlbmF2LCAkbG9jYWxTdG9yYWdlKSB7XG5cblxuICAgICAgJHNjb3BlLnNpZ25pbiA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgIHVzZXJuYW1lOiAkc2NvcGUudXNlcm5hbWUsXG4gICAgICAgICAgcGFzc3dvcmQ6ICRzY29wZS5wYXNzd29yZFxuICAgICAgICB9O1xuICAgICAgICBVc2VyU2VydmljZS5sb2dpbihkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKHJlcykge1xuXG4gICAgICAgICAgJGxvY2FsU3RvcmFnZS5hY3RpdmVVc2VyID0gcmVzLnVzZXI7XG4gICAgICAgICAgJGxvY2FsU3RvcmFnZS51c2VyVG9rZW4gPSByZXMudG9rZW47XG4gICAgICAgICAgJHJvb3RTY29wZS5kaXNwbGF5U3RhdHVzKHJlcy5tZXNzYWdlKTtcbiAgICAgICAgICAkc3RhdGUuZ28oJ3VzZXJob21lJyk7XG4gICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICRyb290U2NvcGUuZGlzcGxheUVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS5zaWdudXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgZmlyc3Q6ICRzY29wZS5maXJzdG5hbWUsXG4gICAgICAgICAgICBsYXN0OiAkc2NvcGUubGFzdG5hbWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVzZXJuYW1lOiAkc2NvcGUudXNlcm5hbWUsXG4gICAgICAgICAgZW1haWw6ICRzY29wZS5lbWFpbCxcbiAgICAgICAgICBwYXNzd29yZDogJHNjb3BlLnBhc3N3b3JkXG4gICAgICAgIH07XG4gICAgICAgIFVzZXJTZXJ2aWNlLnNpZ251cChkYXRhKS5zdWNjZXNzKFxuICAgICAgICAgIGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgJHJvb3RTY29wZS5kaXNwbGF5U3RhdHVzKHJlcy5tZXNzYWdlKTtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcbiAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLmRpc3BsYXlFcnJvcihlcnIubWVzc2FnZSArICd0cnksIGFnYWluJyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICRsb2NhbFN0b3JhZ2UuJHJlc2V0KCk7XG4gICAgICAgIFVzZXJTZXJ2aWNlLmxvZ291dCgpLnN1Y2Nlc3MoXG4gICAgICAgICAgZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmRpc3BsYXlTdGF0dXMocmVzLm1lc3NhZ2UpO1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS5kaXNwbGF5RXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgICRyb290U2NvcGUuZ2V0VXNlckRldGFpbHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHVzZXJJZCA9ICRsb2NhbFN0b3JhZ2UuYWN0aXZlVXNlci5faWQ7XG5cbiAgICAgICAgVXNlclNlcnZpY2UuZ2V0VXNlcih1c2VySWQpLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzKSB7XG5cbiAgICAgICAgICAkc2NvcGUudXNlckRldGFpbHMgPSByZXM7XG4gICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICRyb290U2NvcGUuZGlzcGxheUVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUuZGVsZXRlVXNlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaWQgPSAkbG9jYWxTdG9yYWdlLmFjdGl2ZVVzZXIuX2lkO1xuICAgICAgICBVc2VyU2VydmljZS5kZWxldGVVc2VyKGlkKS5zdWNjZXNzKFxuICAgICAgICAgIGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgJHJvb3RTY29wZS5kaXNwbGF5U3RhdHVzKHJlcy5tZXNzYWdlKTtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICRyb290U2NvcGUuZGlzcGxheVN0YXR1cyhlcnIubWVzc2FnZSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLnRvZ2dsZVNpZGVOYXYgPSBmdW5jdGlvbihJZCkge1xuICAgICAgICAkbWRTaWRlbmF2KElkKS50b2dnbGUoKTtcblxuICAgICAgfTtcblxuICAgICAgJHNjb3BlLnVwZGF0ZVVzZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGlkID0gJGxvY2FsU3RvcmFnZS5hY3RpdmVVc2VyLl9pZDtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgdXNlcm5hbWU6ICRzY29wZS51c2VybmFtZSxcbiAgICAgICAgICBlbWFpbDogJHNjb3BlLmVtYWlsLFxuICAgICAgICAgIHBhc3N3b3JkOiAkc2NvcGUucGFzc3dvcmQsXG4gICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgZmlyc3Q6ICRzY29wZS5maXJzdG5hbWUsXG4gICAgICAgICAgICBsYXN0OiAkc2NvcGUubGFzdG5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFVzZXJTZXJ2aWNlLnVwZGF0ZVVzZXJEYXRhKGlkLCBkYXRhKS5zdWNjZXNzKFxuICAgICAgICAgIGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgJHJvb3RTY29wZS5kaXNwbGF5U3RhdHVzKHJlcy5tZXNzYWdlKTtcbiAgICAgICAgICAgICRzdGF0ZS5nbygndXNlcmhvbWUnKTtcbiAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLmRpc3BsYXlFcnJvcihlcnIubWVzc2FnZSArICd0cnksIGFnYWluJyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLnJlZGlyZWN0ID0gZnVuY3Rpb24ocGFnZSkge1xuICAgICAgICByZXR1cm4gJHN0YXRlLmdvKHBhZ2UpO1xuICAgICAgfTtcblxuICAgIH1cbiAgXSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdkb2N1bWVudE1hbmFnZXJBcHAnKTtcblxuYXBwLmZhY3RvcnkoJ2RvY1NlcnZpY2UnLCBbJyRodHRwJywgJ2Jhc2VVcmwnLCBmdW5jdGlvbigkaHR0cCwgYmFzZVVybCkge1xuXG4gICAgdmFyIERvY3VtZW50ID0ge1xuXG4gICAgICBhZGREb2N1bWVudDogZnVuY3Rpb24oZGF0YSkge1xuXG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVcmwgKyAnL2FwaS9kb2N1bWVudHMnLCBkYXRhKTtcbiAgICAgIH0sXG5cbiAgICAgIGdldEFsbERvY3VtZW50czogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoYmFzZVVybCArICcvYXBpL2RvY3VtZW50cycpO1xuXG4gICAgICB9LFxuXG4gICAgICBnZXRPbmVEb2N1bWVudDogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldChiYXNlVXJsICsgJy9hcGkvZG9jdW1lbnRzLycgKyBpZCk7XG4gICAgICB9LFxuXG4gICAgICBnZXRBbGxVc2VyRG9jdW1lbnRzOiBmdW5jdGlvbih1c2VySWQpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldChiYXNlVXJsICsgJy9hcGkvdXNlcnMvJyArIHVzZXJJZCArICcvZG9jdW1lbnRzJyk7XG4gICAgICB9LFxuXG4gICAgICB1cGRhdGVEb2N1bWVudDogZnVuY3Rpb24oaWQsIGRhdGEpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLnB1dChiYXNlVXJsICsgJy9hcGkvZG9jdW1lbnRzLycgKyBpZCwgZGF0YSk7XG4gICAgICB9LFxuXG4gICAgICBkZWxldGVEb2N1bWVudDogZnVuY3Rpb24oaWQsIHN1Y2Nlc3MsIGVycm9yKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoYmFzZVVybCArICcvYXBpL2RvY3VtZW50cy8nICsgaWQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gRG9jdW1lbnQ7XG5cbiAgfVxuXG5cbl0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnZG9jdW1lbnRNYW5hZ2VyQXBwJyk7XG5cbmFwcC52YWx1ZSgnYmFzZVVybCcsICdodHRwOi8vbG9jYWxob3N0OjMwMDAnKTtcblxuYXBwLmZhY3RvcnkoJ1VzZXJTZXJ2aWNlJywgWyckaHR0cCcsICdiYXNlVXJsJywgZnVuY3Rpb24oJGh0dHAsIGJhc2VVcmwpIHtcblxuICB2YXIgVXNlciA9IHtcblxuICAgIGxvZ2luOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVXJsICsgJy9hcGkvdXNlcnMvbG9naW4nLCBkYXRhKTtcbiAgICB9LFxuICAgIGxvZ291dDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVXJsICsgJy9hcGkvdXNlcnMvbG9nb3V0Jyk7XG4gICAgfSxcblxuICAgIHNpZ251cDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVybCArICcvYXBpL3VzZXJzLycsIGRhdGEpO1xuICAgIH0sXG5cbiAgICBnZXRVc2VyOiBmdW5jdGlvbihpZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldChiYXNlVXJsICsgJy9hcGkvdXNlcnMvJyArIGlkKTtcbiAgICB9LFxuXG4gICAgdXBkYXRlVXNlckRhdGE6IGZ1bmN0aW9uKGlkLCBkYXRhKSB7XG4gICAgICByZXR1cm4gJGh0dHAucHV0KGJhc2VVcmwgKyAnL2FwaS91c2Vycy8nICsgaWQsIGRhdGEpO1xuICAgIH0sXG5cbiAgICBkZWxldGVVc2VyOiBmdW5jdGlvbihpZCwgZGF0YSkge1xuICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZShiYXNlVXJsICsgJy9hcGkvdXNlcnMvJyArIGlkKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFVzZXI7XG59XSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
