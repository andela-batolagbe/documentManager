var app=angular.module("documentManagerApp",["ui.router","ngMaterial","ngMessages","ngAnimate","ngAria","ngMdIcons","ngStorage"]);app.config(["$stateProvider","$httpProvider","$urlRouterProvider","$locationProvider","$mdThemingProvider",function(e,t,r,o,s,a){e.state("home",{url:"/",views:{"":{templateUrl:"partials/nav-view.html"},"homeView@home":{templateUrl:"partials/home-view.html",controller:"MainCtrl"},"aboutView@home":{templateUrl:"partials/about-view.html",controller:"MainCtrl"}}}).state("login",{url:"/login",views:{"":{templateUrl:"partials/nav-view.html"},"homeView@login":{templateUrl:"partials/login-view.html",controller:"UserCtrl"}}}).state("signup",{url:"/signup",views:{"":{templateUrl:"partials/nav-view.html"},"homeView@signup":{templateUrl:"partials/signup-view.html",controller:"UserCtrl"}}}).state("userhome",{url:"/userhome",views:{"":{templateUrl:"partials/usernav-view.html",controller:"UserCtrl"},"docView@userhome":{templateUrl:"partials/userHome-view.html",controller:"docCtrl"}}}).state("all-docs",{url:"/all-docs",views:{"":{templateUrl:"partials/usernav-view.html",controller:"UserCtrl"},"docView@all-docs":{templateUrl:"partials/alldoc-view.html",controller:"docCtrl"}}}).state("view-profile",{url:"/view-profile",views:{"":{templateUrl:"partials/usernav-view.html",controller:"UserCtrl"},"docView@view-profile":{templateUrl:"partials/userProfile-view.html",controller:"UserCtrl"}}}).state("edit-profile",{url:"/edit-profile",views:{"":{templateUrl:"partials/usernav-view.html",controller:"UserCtrl"},"docView@edit-profile":{templateUrl:"partials/userProfileEdit-view.html",controller:"UserCtrl"}}}),r.otherwise("/"),o.html5Mode(!0);var n={50:"#ffffff",100:"#ffffff",200:"#ffffff",300:"#ffffff",400:"#ffffff",500:"#ffffff",600:"#f2f2f2",700:"#e6e6e6",800:"#d9d9d9",900:"#cccccc",A100:"#ffffff",A200:"#ffffff",A400:"#ffffff",A700:"#bfbfbf"};s.definePalette("newPrimary",n),s.theme("default").primaryPalette("newPrimary").accentPalette("light-blue").warnPalette("red").backgroundPalette("newPrimary"),t.interceptors.push(["$q","$location","$localStorage",function(e,t,r){return{request:function(e){return e.headers=e.headers||{},r.userToken&&(e.headers["x-access-token"]=r.userToken),e},responseError:function(r){return(401===r.status||403===r.status)&&t.path("/signin"),e.reject(r)}}}])}]),angular.module("documentManagerApp").controller("docCtrl",["docService","$state","$rootScope","$window","$scope","$location","$mdDialog","$localStorage",function(e,t,r,o,s,a,n,l){function i(t,r,o,s){t.createDocument=function(){var r={title:t.title,content:t.content,user:l.activeUser.username};e.addDocument(r).success(function(e){o.reload(),s.displayStatus(e.message)}).error(function(e){s.displayError(e.message+"try, again")})},t.hide=function(){r.hide()},t.cancel=function(){r.cancel()}}s.getAllDocuments=function(){e.getAllDocuments().success(function(e){s.Documents=e}).error(function(e){s.getErrorMessage=e.message})},s.getOneDocument=function(t){var o=s.id;e.getOneDocument(o).success(function(e){s.Document=e,l.currentDoc=e}).error(function(e){r.displayError(e.message)})},s.getAllUserDocuments=function(){var t=l.activeUser._id;e.getAllUserDocuments(t).success(function(e){s.userDocuments=e}).error(function(e){r.displayError(e.message)})},s.editDocument=function(o,s){var a={title:s.title,content:s.content};e.updateDocument(o,a).success(function(e){t.reload(),r.displayStatus(e.message)}).error(function(e){r.displayError(e.message+"try, again")})},s.deleteDocument=function(o){e.deleteDocument(o).success(function(e){t.reload(),r.displayStatus(e.message)}).error(function(e){r.displayError(e.message+"try, again")})},r.showDocDialog=function(e){n.show({controller:i,templateUrl:"../../partials/docDialog-view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}]),angular.module("documentManagerApp").controller("MainCtrl",["$state","$rootScope","$scope","$mdToast",function(e,t,r,o){t.displayStatus=function(e){o.show(o.simple().content(e).position("top right").hideDelay(2e3))},t.displayError=function(e){o.show({template:'<md-toast style="background:#dc145c; color:#ffffff">'+e+"</md-toast>",hideDelay:3e3,position:"top right"})}}]),angular.module("documentManagerApp").controller("UserCtrl",["UserService","$rootScope","$state","$scope","$location","$mdSidenav","$localStorage",function(e,t,r,o,s,a,n){o.signin=function(){var s={username:o.username,password:o.password};e.login(s).success(function(e){n.activeUser=e.user,n.userToken=e.token,t.displayStatus(e.message),r.go("userhome")}).error(function(e){t.displayError(e.message),r.go("login")})},o.signup=function(){var s={name:{first:o.firstname,last:o.lastname},username:o.username,email:o.email,password:o.password};e.signup(s).success(function(e){t.displayStatus(e.message),r.go("login")}).error(function(e){t.displayError(e.message+" try, again")})},o.logout=function(){n.$reset(),e.logout().success(function(e){t.displayStatus(e.message),r.go("home")}).error(function(e){t.displayError(e.message)})},t.getUserDetails=function(){var r=n.activeUser._id;e.getUser(r).success(function(e){o.userDetails=e}).error(function(e){t.displayError(e.message)})},o.deleteUser=function(){var o=n.activeUser._id;e.deleteUser(o).success(function(e){t.displayStatus(e.message),r.go("home")}).error(function(e){t.displayError(e.message)})},o.toggleSideNav=function(e){a(e).toggle()},o.updateUser=function(){var s=n.activeUser._id,a={username:o.userDetails.username,email:o.userDetails.email,password:o.userDetails.password,name:{first:o.userDetails.name.first,last:o.userDetails.name.last}};e.updateUserData(s,a).success(function(e){t.displayStatus(e.message),r.reload("userhome")}).error(function(e){t.displayError(e.message+" try, again")})},o.redirect=function(e){return r.go(e)}}]);var app=angular.module("documentManagerApp");app.factory("docService",["$http","baseUrl",function(e,t){var r={addDocument:function(r){return e.post(t+"/api/documents",r)},getAllDocuments:function(){return e.get(t+"/api/documents")},getOneDocument:function(r){return e.get(t+"/api/documents/"+r)},getAllUserDocuments:function(r){return e.get(t+"/api/users/"+r+"/documents")},updateDocument:function(r,o){return e.put(t+"/api/documents/"+r,o)},deleteDocument:function(r){return e["delete"](t+"/api/documents/"+r)}};return r}]);var app=angular.module("documentManagerApp");app.value("baseUrl","http://localhost:3000"),app.factory("UserService",["$http","baseUrl",function(e,t){var r={login:function(r){return e.post(t+"/api/users/login",r)},logout:function(){return e.post(t+"/api/users/logout")},signup:function(r){return e.post(t+"/api/users/",r)},getUser:function(r){return e.get(t+"/api/users/"+r)},updateUserData:function(r,o){return e.put(t+"/api/users/"+r,o)},deleteUser:function(r){return e["delete"](t+"/api/users/"+r)}};return r}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL2RvY3VtZW50LWNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9tYWluLWNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy91c2VyLWNvbnRyb2xsZXIuanMiLCJzZXJ2aWNlcy9kb2N1bWVudC1zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL3VzZXItc2VydmljZXMuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwicGFsbGV0ZXMiLCJzdGF0ZSIsInVybCIsInZpZXdzIiwiIiwidGVtcGxhdGVVcmwiLCJob21lVmlld0Bob21lIiwiY29udHJvbGxlciIsImFib3V0Vmlld0Bob21lIiwiaG9tZVZpZXdAbG9naW4iLCJob21lVmlld0BzaWdudXAiLCJkb2NWaWV3QHVzZXJob21lIiwiZG9jVmlld0BhbGwtZG9jcyIsImRvY1ZpZXdAdmlldy1wcm9maWxlIiwiZG9jVmlld0BlZGl0LXByb2ZpbGUiLCJvdGhlcndpc2UiLCJodG1sNU1vZGUiLCJuZXdQcmltYXJ5IiwiNTAiLCIxMDAiLCIyMDAiLCIzMDAiLCI0MDAiLCI1MDAiLCI2MDAiLCI3MDAiLCI4MDAiLCI5MDAiLCJBMTAwIiwiQTIwMCIsIkE0MDAiLCJBNzAwIiwiZGVmaW5lUGFsZXR0ZSIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2FyblBhbGV0dGUiLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsImludGVyY2VwdG9ycyIsInB1c2giLCIkcSIsIiRsb2NhdGlvbiIsIiRsb2NhbFN0b3JhZ2UiLCJyZXF1ZXN0IiwiaGVhZGVycyIsInVzZXJUb2tlbiIsInJlc3BvbnNlRXJyb3IiLCJyZXNwb25zZSIsInN0YXR1cyIsInBhdGgiLCJyZWplY3QiLCJkb2NTZXJ2aWNlIiwiJHN0YXRlIiwiJHJvb3RTY29wZSIsIiR3aW5kb3ciLCIkc2NvcGUiLCIkbWREaWFsb2ciLCJkb2NEaWFsb2dDdHJsIiwiY3JlYXRlRG9jdW1lbnQiLCJkYXRhIiwidGl0bGUiLCJjb250ZW50IiwidXNlciIsImFjdGl2ZVVzZXIiLCJ1c2VybmFtZSIsImFkZERvY3VtZW50Iiwic3VjY2VzcyIsInJlcyIsInJlbG9hZCIsImRpc3BsYXlTdGF0dXMiLCJtZXNzYWdlIiwiZXJyb3IiLCJlcnIiLCJkaXNwbGF5RXJyb3IiLCJoaWRlIiwiY2FuY2VsIiwiZ2V0QWxsRG9jdW1lbnRzIiwiRG9jdW1lbnRzIiwiZ2V0RXJyb3JNZXNzYWdlIiwiZ2V0T25lRG9jdW1lbnQiLCJpZCIsImRvY0lkIiwiRG9jdW1lbnQiLCJjdXJyZW50RG9jIiwiZ2V0QWxsVXNlckRvY3VtZW50cyIsInVzZXJJZCIsIl9pZCIsInVzZXJEb2N1bWVudHMiLCJlZGl0RG9jdW1lbnQiLCJkb2MiLCJ1cGRhdGVEb2N1bWVudCIsImRlbGV0ZURvY3VtZW50Iiwic2hvd0RvY0RpYWxvZyIsImVudiIsInNob3ciLCJwYXJlbnQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJib2R5IiwidGFyZ2V0RXZlbnQiLCJjbGlja091dHNpZGVUb0Nsb3NlIiwiJG1kVG9hc3QiLCJzaW1wbGUiLCJwb3NpdGlvbiIsImhpZGVEZWxheSIsInRlbXBsYXRlIiwiVXNlclNlcnZpY2UiLCIkbWRTaWRlbmF2Iiwic2lnbmluIiwicGFzc3dvcmQiLCJsb2dpbiIsInRva2VuIiwiZ28iLCJzaWdudXAiLCJuYW1lIiwiZmlyc3QiLCJmaXJzdG5hbWUiLCJsYXN0IiwibGFzdG5hbWUiLCJlbWFpbCIsImxvZ291dCIsIiRyZXNldCIsImdldFVzZXJEZXRhaWxzIiwiZ2V0VXNlciIsInVzZXJEZXRhaWxzIiwiZGVsZXRlVXNlciIsInRvZ2dsZVNpZGVOYXYiLCJJZCIsInRvZ2dsZSIsInVwZGF0ZVVzZXIiLCJ1cGRhdGVVc2VyRGF0YSIsInJlZGlyZWN0IiwicGFnZSIsImZhY3RvcnkiLCIkaHR0cCIsImJhc2VVcmwiLCJwb3N0IiwiZ2V0IiwicHV0IiwidmFsdWUiLCJVc2VyIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLHNCQUFBLFlBQUEsYUFBQSxhQUFBLFlBQUEsU0FBQSxZQUFBLGFBVUFGLEtBQUFHLFFBQUEsaUJBQUEsZ0JBQUEscUJBQUEsb0JBQUEscUJBQ0EsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FFQUwsRUFDQU0sTUFBQSxRQUNBQyxJQUFBLElBQ0FDLE9BQ0FDLElBQ0FDLFlBQUEsMEJBRUFDLGlCQUNBRCxZQUFBLDBCQUNBRSxXQUFBLFlBRUFDLGtCQUNBSCxZQUFBLDJCQUNBRSxXQUFBLGVBS0FOLE1BQUEsU0FDQUMsSUFBQSxTQUNBQyxPQUNBQyxJQUNBQyxZQUFBLDBCQUVBSSxrQkFDQUosWUFBQSwyQkFDQUUsV0FBQSxlQUlBTixNQUFBLFVBQ0FDLElBQUEsVUFDQUMsT0FDQUMsSUFDQUMsWUFBQSwwQkFFQUssbUJBQ0FMLFlBQUEsNEJBQ0FFLFdBQUEsZUFJQU4sTUFBQSxZQUNBQyxJQUFBLFlBQ0FDLE9BQ0FDLElBQ0FDLFlBQUEsNkJBQ0FFLFdBQUEsWUFFQUksb0JBQ0FOLFlBQUEsOEJBQ0FFLFdBQUEsY0FJQU4sTUFBQSxZQUNBQyxJQUFBLFlBQ0FDLE9BQ0FDLElBQ0FDLFlBQUEsNkJBQ0FFLFdBQUEsWUFFQUssb0JBQ0FQLFlBQUEsNEJBQ0FFLFdBQUEsY0FJQU4sTUFBQSxnQkFDQUMsSUFBQSxnQkFDQUMsT0FDQUMsSUFDQUMsWUFBQSw2QkFDQUUsV0FBQSxZQUVBTSx3QkFDQVIsWUFBQSxpQ0FDQUUsV0FBQSxlQUlBTixNQUFBLGdCQUNBQyxJQUFBLGdCQUNBQyxPQUNBQyxJQUNBQyxZQUFBLDZCQUNBRSxXQUFBLFlBRUFPLHdCQUNBVCxZQUFBLHFDQUNBRSxXQUFBLGVBSUFWLEVBQUFrQixVQUFBLEtBR0FqQixFQUFBa0IsV0FBQSxFQU1BLElBQUFD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RCxFQUFBckIsSUFPQWtFLFdBQUEsU0FBQTdDLEdBQ0EsTUFBQXNELEdBQUFBLFVBQUFDLEVBQUEsY0FBQXZELElBSUEsT0FBQTREIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnZG9jdW1lbnRNYW5hZ2VyQXBwJywgWyd1aS5yb3V0ZXInLCAnbmdNYXRlcmlhbCcsICduZ01lc3NhZ2VzJywgJ25nQW5pbWF0ZScsICduZ0FyaWEnLCAnbmdNZEljb25zJywgJ25nU3RvcmFnZSddKTtcblxuLyoqXG4gKiBbQXBwIENvbmZpZ3VyYXRpb25zXVxuICogQHBhcmFtICB7YW5ndWxhciBtZXRob2R9ICRzdGF0ZVByb3ZpZGVyICAgICBbYXBwIHN0YXRlIGNvbmZpZ3VyYXRpb25dXG4gKiBAcGFyYW0gIHthbmd1bGFyIG1ldGhvZH0gJGh0dHBQcm92aWRlciAgICAgIFtodHRwIHJlcXVlc3QgY29uZmlndXJhdGlvbl1cbiAqIEBwYXJhbSAge2FuZ3VsYXIgbWV0aG9kfSAkdXJsUm91dGVyUHJvdmlkZXIgW3JvdXRlcyBjb25maWd1cmF0aW9uXVxuICogQHBhcmFtICB7YW5ndWxhciBtZXRob2R9ICRsb2NhdGlvblByb3ZpZGVyICBbbG9jYXRpb24gY29uZmlndXJhdGlvbl1cbiAqIEBwYXJhbSAge2FuZ3VsYXIgbWV0aG9kfSAkbWRUaGVtaW5nUHJvdmlkZXIgW2ZvciB0aGVtZSBjb25maWd1cmF0aW9uXVxuICovXG5hcHAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCAnJGh0dHBQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCAnJG1kVGhlbWluZ1Byb3ZpZGVyJyxcbiAgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICRodHRwUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIsICRtZFRoZW1pbmdQcm92aWRlciwgcGFsbGV0ZXMpIHtcblxuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICAgIHVybDogXCIvXCIsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJyc6IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvbmF2LXZpZXcuaHRtbCdcbiAgICAgICAgICB9LFxuICAgICAgICAgICdob21lVmlld0Bob21lJzoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9ob21lLXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTWFpbkN0cmwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnYWJvdXRWaWV3QGhvbWUnOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2Fib3V0LXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTWFpbkN0cmwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgLnN0YXRlKCdsb2dpbicsIHtcbiAgICAgICAgdXJsOiBcIi9sb2dpblwiLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICcnOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL25hdi12aWV3Lmh0bWwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnaG9tZVZpZXdAbG9naW4nOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2xvZ2luLXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckN0cmwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnN0YXRlKCdzaWdudXAnLCB7XG4gICAgICAgIHVybDogXCIvc2lnbnVwXCIsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJyc6IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvbmF2LXZpZXcuaHRtbCdcbiAgICAgICAgICB9LFxuICAgICAgICAgICdob21lVmlld0BzaWdudXAnOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3NpZ251cC12aWV3Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1VzZXJDdHJsJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgndXNlcmhvbWUnLCB7XG4gICAgICAgIHVybDogXCIvdXNlcmhvbWVcIixcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy91c2VybmF2LXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckN0cmwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnZG9jVmlld0B1c2VyaG9tZSc6IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvdXNlckhvbWUtdmlldy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdkb2NDdHJsJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnYWxsLWRvY3MnLCB7XG4gICAgICAgIHVybDogXCIvYWxsLWRvY3NcIixcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy91c2VybmF2LXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckN0cmwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnZG9jVmlld0BhbGwtZG9jcyc6IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvYWxsZG9jLXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnZG9jQ3RybCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ3ZpZXctcHJvZmlsZScsIHtcbiAgICAgICAgdXJsOiBcIi92aWV3LXByb2ZpbGVcIixcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy91c2VybmF2LXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckN0cmwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnZG9jVmlld0B2aWV3LXByb2ZpbGUnOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3VzZXJQcm9maWxlLXZpZXcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckN0cmwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnN0YXRlKCdlZGl0LXByb2ZpbGUnLCB7XG4gICAgICAgIHVybDogXCIvZWRpdC1wcm9maWxlXCIsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJyc6IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvdXNlcm5hdi12aWV3Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1VzZXJDdHJsJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgJ2RvY1ZpZXdAZWRpdC1wcm9maWxlJzoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy91c2VyUHJvZmlsZUVkaXQtdmlldy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyQ3RybCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvXCIpO1xuXG4gICAgLy91c2UgSFRNTDUgbW9kZVxuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIGRlZmluZSBhIG5ldyBwcmltYXJ5IGNvbG9yIHBhbGV0dGVcbiAgICAgKiBmb3IgdGhlIGFwcFxuICAgICAqL1xuICAgIHZhciBuZXdQcmltYXJ5ID0ge1xuICAgICAgJzUwJzogJyNmZmZmZmYnLFxuICAgICAgJzEwMCc6ICcjZmZmZmZmJyxcbiAgICAgICcyMDAnOiAnI2ZmZmZmZicsXG4gICAgICAnMzAwJzogJyNmZmZmZmYnLFxuICAgICAgJzQwMCc6ICcjZmZmZmZmJyxcbiAgICAgICc1MDAnOiAnI2ZmZmZmZicsXG4gICAgICAnNjAwJzogJyNmMmYyZjInLFxuICAgICAgJzcwMCc6ICcjZTZlNmU2JyxcbiAgICAgICc4MDAnOiAnI2Q5ZDlkOScsXG4gICAgICAnOTAwJzogJyNjY2NjY2MnLFxuICAgICAgJ0ExMDAnOiAnI2ZmZmZmZicsXG4gICAgICAnQTIwMCc6ICcjZmZmZmZmJyxcbiAgICAgICdBNDAwJzogJyNmZmZmZmYnLFxuICAgICAgJ0E3MDAnOiAnI2JmYmZiZidcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogZGVmaW5lIGN1c3RvbSB3aGl0ZSB0aGVtZSBmb3IgdGhlIFVJLFxuICAgICAqL1xuICAgICRtZFRoZW1pbmdQcm92aWRlci5kZWZpbmVQYWxldHRlKCduZXdQcmltYXJ5JywgbmV3UHJpbWFyeSk7XG5cbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxuICAgICAgLnByaW1hcnlQYWxldHRlKCduZXdQcmltYXJ5JylcbiAgICAgIC5hY2NlbnRQYWxldHRlKCdsaWdodC1ibHVlJylcbiAgICAgIC53YXJuUGFsZXR0ZSgncmVkJylcbiAgICAgIC5iYWNrZ3JvdW5kUGFsZXR0ZSgnbmV3UHJpbWFyeScpO1xuXG4gIC8qKlxuICAgKiBbSW50ZXJjZXB0b3IgZm9yIGF0dGFjaGluZyB0b2tlbiB0byBhbGwgcmVxdWVzdCBoZWFkZXJzXVxuICAgKiBAcGFyYW0gIHtxIHBhY2thZ2UgaW5qZWN0b3J9ICRxICAgICAgICAgICAgICAgW2Rlc2NyaXB0aW9uXVxuICAgKiBAcGFyYW0gIHthbmd1bGFyIHN0YXRlfSAkbG9jYXRpb24gICAgICAgIFtkZXNjcmlwdGlvbl1cbiAgICogQHBhcmFtICB7bG9jYWwgc3RvcmFnZSBpbmplY3Rvcn0gJGxvY2FsU3RvcmFnZSAgXG4gICAqIFxuICAgKiBAcmV0dXJuIHtvYmplY3R9ICAgICAgICAgICAgICAgICAgW2hlYWRlciBjb25maWd1cmF0aW9uIG9yIGVycm9yIG1lc3NhZ2VdXG4gICAqL1xuICBcbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKFsnJHEnLCAnJGxvY2F0aW9uJywgJyRsb2NhbFN0b3JhZ2UnLCBmdW5jdGlvbigkcSwgJGxvY2F0aW9uLCAkbG9jYWxTdG9yYWdlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAncmVxdWVzdCc6IGZ1bmN0aW9uKGNvbmZpZykge1xuICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG4gICAgICAgICAgaWYgKCRsb2NhbFN0b3JhZ2UudXNlclRva2VuKSB7XG4gICAgICAgICAgICBjb25maWcuaGVhZGVyc1sneC1hY2Nlc3MtdG9rZW4nXSA9ICRsb2NhbFN0b3JhZ2UudXNlclRva2VuO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICB9LFxuICAgICAgICAncmVzcG9uc2VFcnJvcic6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL3NpZ25pbicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XSk7XG5cbiAgfVxuXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnZG9jdW1lbnRNYW5hZ2VyQXBwJylcbiAgLmNvbnRyb2xsZXIoJ2RvY0N0cmwnLCBbJ2RvY1NlcnZpY2UnLCAnJHN0YXRlJywgJyRyb290U2NvcGUnLCAnJHdpbmRvdycsICckc2NvcGUnLCAnJGxvY2F0aW9uJywgJyRtZERpYWxvZycsICckbG9jYWxTdG9yYWdlJyxcbiAgICBmdW5jdGlvbihkb2NTZXJ2aWNlLCAkc3RhdGUsICRyb290U2NvcGUsICR3aW5kb3csICRzY29wZSwgJGxvY2F0aW9uLCAkbWREaWFsb2csICRsb2NhbFN0b3JhZ2UpIHtcblxuXG5cbiAgICAgIC8qKlxuICAgICAgICogW2dldEFsbERvY3VtZW50czogIHJldHVybiBhbGwgZG9jdW1lbnRzIGFuZCBkaXNwbGF5XVxuICAgICAgICogQHJldHVybiB7YXJyYXl9IFthcnJheSBvZiBkb2N1bWVudHMgaW4gZGF0YWJhc2Ugb3IgZXJyb3IgbWVzc2FnZV1cbiAgICAgICAqL1xuICAgICAgJHNjb3BlLmdldEFsbERvY3VtZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGRvY1NlcnZpY2UuZ2V0QWxsRG9jdW1lbnRzKCkuc3VjY2VzcyhmdW5jdGlvbihyZXMpIHtcblxuICAgICAgICAgICRzY29wZS5Eb2N1bWVudHMgPSByZXM7XG5cbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgJHNjb3BlLmdldEVycm9yTWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogW2dldE9uZURvY3VtZW50IGdldCBhIHNpbmdsZSBkb2N1bWVudCBmcm9tIHRoZSBiYWNrZW5kXVxuICAgICAgICogQHBhcmFtICB7c3RyaW5nfSBpZCBbZG9jdW1lbnQgSWRdXG4gICAgICAgKiBAcmV0dXJuIHtvYmplY3R9ICAgIFtkb2N1bWVudCBkZXRhaWxzIG9yIGVycm9yIG1lc3NhZ2VdXG4gICAgICAgKi9cbiAgICAgICRzY29wZS5nZXRPbmVEb2N1bWVudCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgIHZhciBkb2NJZCA9ICRzY29wZS5pZDtcbiAgICAgICAgZG9jU2VydmljZS5nZXRPbmVEb2N1bWVudChkb2NJZCkuc3VjY2VzcyhmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAkc2NvcGUuRG9jdW1lbnQgPSByZXM7XG4gICAgICAgICAgJGxvY2FsU3RvcmFnZS5jdXJyZW50RG9jID0gcmVzO1xuICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLmRpc3BsYXlFcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgLy9jb2xsZWN0IGFsbCBkb2N1bWVudHMgYmVsb25naW5nIHRvIGEgdXNlclxuICAgICAgLyoqXG4gICAgICAgKiBbZ2V0QWxsVXNlckRvY3VtZW50czogcmV0dXJuIGFsbCBkb2N1bWVudHMgYmVsb25naW5nXG4gICAgICAgKiAgdG8gYSB1c2VyIGFuZCBkaXNwbGF5XVxuICAgICAgICogQHJldHVybiB7YXJyYXl9IFtkb2N1bWVudCBsaXN0IG9yIGVycm9yIG1lc3NhZ2VdXG4gICAgICAgKi9cbiAgICAgICRzY29wZS5nZXRBbGxVc2VyRG9jdW1lbnRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIHVzZXJJZCA9ICRsb2NhbFN0b3JhZ2UuYWN0aXZlVXNlci5faWQ7XG5cbiAgICAgICAgZG9jU2VydmljZS5nZXRBbGxVc2VyRG9jdW1lbnRzKHVzZXJJZCkuc3VjY2VzcyhmdW5jdGlvbihyZXMpIHtcblxuICAgICAgICAgICRzY29wZS51c2VyRG9jdW1lbnRzID0gcmVzO1xuXG4gICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICRyb290U2NvcGUuZGlzcGxheUVycm9yKGVyci5tZXNzYWdlKTtcblxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogW2VkaXREb2N1bWVudCBlZGl0IGNvbnRlbnRzIG9mIGEgZG9jdW1lbnRdXG4gICAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGlkICBbZG9jdW1lbnQgSWRdXG4gICAgICAgKiBAcGFyYW0gIHtvYmplY3R9IGRvYyBbbmV3IGRvY3VtZW50IGRldGFpbHNdXG4gICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9ICAgICBbc3VjY2VzcyBvciBlcm9yIG1lc3NhZ2UgZnJvbSB0aGUgYmFja2VuZF1cbiAgICAgICAqL1xuICAgICAgJHNjb3BlLmVkaXREb2N1bWVudCA9IGZ1bmN0aW9uKGlkLCBkb2MpIHtcblxuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICB0aXRsZTogZG9jLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGRvYy5jb250ZW50XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBkb2NTZXJ2aWNlLnVwZGF0ZURvY3VtZW50KGlkLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcbiAgICAgICAgICAkcm9vdFNjb3BlLmRpc3BsYXlTdGF0dXMocmVzLm1lc3NhZ2UpO1xuICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLmRpc3BsYXlFcnJvcihlcnIubWVzc2FnZSArICd0cnksIGFnYWluJyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBbZGVsZXRlRG9jdW1lbnQgcmVtb3ZlIGEgZG9jdW1lbnQgZnJvbSBsaXN0XVxuICAgICAgICogQHBhcmFtICB7c3RyaW5nfSBpZCBbZG9jdW1lbnQgSWRdXG4gICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9ICAgIFtzdWNjZXNzIG9yIGVycm9yIG1lc3NhZ2VdXG4gICAgICAgKi9cbiAgICAgICRzY29wZS5kZWxldGVEb2N1bWVudCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgIGRvY1NlcnZpY2UuZGVsZXRlRG9jdW1lbnQoaWQpLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgJHN0YXRlLnJlbG9hZCgpO1xuICAgICAgICAgICRyb290U2NvcGUuZGlzcGxheVN0YXR1cyhyZXMubWVzc2FnZSk7XG4gICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICRyb290U2NvcGUuZGlzcGxheUVycm9yKGVyci5tZXNzYWdlICsgJ3RyeSwgYWdhaW4nKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIFtzaG93RG9jRGlhbG9nIGRvY3VtZW50IGNyZWF0aW9uIG1vZGFsIGRpYWxvZ11cbiAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gZW52IFtldmVudCBub3RpZmllcl1cbiAgICAgICAqIEByZXR1cm4ge25vbmV9ICAgICBbcG9wIG9wZW4gbW9kYWxdXG4gICAgICAgKi9cbiAgICAgICRyb290U2NvcGUuc2hvd0RvY0RpYWxvZyA9IGZ1bmN0aW9uKGVudikge1xuICAgICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgICAgY29udHJvbGxlcjogZG9jRGlhbG9nQ3RybCxcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4uLy4uL3BhcnRpYWxzL2RvY0RpYWxvZy12aWV3Lmh0bWwnLFxuICAgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgICAgIHRhcmdldEV2ZW50OiBlbnYsXG4gICAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogW2RvY0RpYWxvZ0N0cmwgY29udHJvbGxlciBmb3IgYWN0aXZpdGllcyBvbiBcbiAgICAgICAqIGRvY3VtZW50IGNyZWF0aW9uIGRpYWxvZ11cbiAgICAgICAqIFxuICAgICAgICogQHBhcmFtICB7YW5ndWxhciBtZXRob2R9ICRzY29wZSAgICAgW25ldyBzY29wZSBmb3IgY29udHJvbGxpbmcgZG9tIGV2ZW50c11cbiAgICAgICAqIEBwYXJhbSAge2FuZ3VsYXIgbWV0aG9kfSAkbWREaWFsb2cgIFtmb3IgY29udHJvbGxpbmcgZGlhbG9nIGRpc3BsYXldXG4gICAgICAgKiBAcGFyYW0gIHthbmd1bGFyIG1ldGhvZH0gJHN0YXRlICAgICBbYW5ndWxhciBzdGF0ZSB0byB1cGRhdGUgcGFnZV1cbiAgICAgICAqIEBwYXJhbSAge2FuZ3VsYXIgbWV0aG9kfSAkcm9vdFNjb3BlIFtmb3Igc3RhdHVzIGRpc3BsYXkgZnVuY3Rpb25zXVxuICAgICAgICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgICAgIFtzdGF0dXMgbWVzc2FnZV1cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gZG9jRGlhbG9nQ3RybCgkc2NvcGUsICRtZERpYWxvZywgJHN0YXRlLCAkcm9vdFNjb3BlKSB7XG5cbiAgICAgICAgLy9jcmVhdGUgYSBkb2N1bWVudCB3aXRoaW4gdGhlIGRpYWxvcGdcbiAgICAgICAgJHNjb3BlLmNyZWF0ZURvY3VtZW50ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHRpdGxlOiAkc2NvcGUudGl0bGUsXG4gICAgICAgICAgICBjb250ZW50OiAkc2NvcGUuY29udGVudCxcbiAgICAgICAgICAgIHVzZXI6ICRsb2NhbFN0b3JhZ2UuYWN0aXZlVXNlci51c2VybmFtZVxuXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGRvY1NlcnZpY2UuYWRkRG9jdW1lbnQoZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcbiAgICAgICAgICAgICRyb290U2NvcGUuZGlzcGxheVN0YXR1cyhyZXMubWVzc2FnZSk7XG4gICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmRpc3BsYXlFcnJvcihlcnIubWVzc2FnZSArICd0cnksIGFnYWluJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFtoaWRlIGhpZGUgZGlhbG9nXVxuICAgICAgICAgKi9cbiAgICAgICAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFtjYW5jZWwgY2FuY2VsIGRpYWxvZyB3aXRob3V0IHNhdmluZyBjaGFuZ2VzXSBcbiAgICAgICAgICovXG4gICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkbWREaWFsb2cuY2FuY2VsKCk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICB9XG5cbiAgXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnZG9jdW1lbnRNYW5hZ2VyQXBwJylcbiAgLmNvbnRyb2xsZXIoJ01haW5DdHJsJywgWyckc3RhdGUnLCAnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJG1kVG9hc3QnLFxuICAgIGZ1bmN0aW9uKCRzdGF0ZSwgJHJvb3RTY29wZSwgJHNjb3BlLCAkbWRUb2FzdCkge1xuXG4gICAgICAvKipcbiAgICAgICAqIFtkaXNwbGF5U3RhdHVzIGRpc3BsYXkgc3VjY2Vzc3MgbWVzc2FnZXNdXG4gICAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG1lc3NhZ2UgW21lc3NhZ2UgdG8gYmUgZGlzcGxheWVkXVxuICAgICAgICogQHJldHVybiB7aHRtbCB0YWd9ICAgICAgICAgW3RvYXN0IHNob3dpbmcgdGhlIG1lc3NhZ2VdXG4gICAgICAgKi9cbiAgICAgICRyb290U2NvcGUuZGlzcGxheVN0YXR1cyA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxuICAgICAgICAgIC5jb250ZW50KG1lc3NhZ2UpXG4gICAgICAgICAgLnBvc2l0aW9uKCd0b3AgcmlnaHQnKVxuICAgICAgICAgIC5oaWRlRGVsYXkoMjAwMClcbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogW2Rpc3BsYXlFcnJvciBkaXNwbGF5IGVycm9yIG1lc3NhZ2VzXVxuICAgICAgICogQHBhcmFtICB7c3RyaW5nfSBtZXNzYWdlIFtlcnJvciBtZXNzYWdlIHRvIGJlIGRpc3BsYXllZF1cbiAgICAgICAqIEByZXR1cm4ge2h0bWwgdGFnfSAgICAgICAgIFt0b2FzdCBzaG93aW5nIHRoZSBtZXNzYWdlXVxuICAgICAgICovXG4gICAgICAkcm9vdFNjb3BlLmRpc3BsYXlFcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgJG1kVG9hc3Quc2hvdyh7XG4gICAgICAgICAgdGVtcGxhdGU6ICc8bWQtdG9hc3Qgc3R5bGU9XCJiYWNrZ3JvdW5kOiNkYzE0NWM7IGNvbG9yOiNmZmZmZmZcIj4nICsgbWVzc2FnZSArICc8L21kLXRvYXN0PicsXG4gICAgICAgICAgaGlkZURlbGF5OiAzMDAwLFxuICAgICAgICAgIHBvc2l0aW9uOiAndG9wIHJpZ2h0J1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICBdKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdkb2N1bWVudE1hbmFnZXJBcHAnKVxuICAuY29udHJvbGxlcignVXNlckN0cmwnLCBbJ1VzZXJTZXJ2aWNlJywgJyRyb290U2NvcGUnLCAnJHN0YXRlJywgJyRzY29wZScsICckbG9jYXRpb24nLCAnJG1kU2lkZW5hdicsICckbG9jYWxTdG9yYWdlJyxcbiAgICBmdW5jdGlvbihVc2VyU2VydmljZSwgJHJvb3RTY29wZSwgJHN0YXRlLCAkc2NvcGUsICRsb2NhdGlvbiwgJG1kU2lkZW5hdiwgJGxvY2FsU3RvcmFnZSkge1xuXG4gICAgICAvKipcbiAgICAgICAqIFtzaWduaW46IHNpZ24gaW4gYSB1c2VyIGFuZCByZWRpcmVjdFxuICAgICAgICogIHRvIHVzZXIgaG9tZSBpZiBzdWNjZXNzZnVsXVxuICAgICAgICogQHJldHVybiB7c3RyaW5nfSBbc3RhdHVzIG1lc3NhZ2VdXG4gICAgICAgKi9cbiAgICAgICRzY29wZS5zaWduaW4gPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICB1c2VybmFtZTogJHNjb3BlLnVzZXJuYW1lLFxuICAgICAgICAgIHBhc3N3b3JkOiAkc2NvcGUucGFzc3dvcmRcbiAgICAgICAgfTtcbiAgICAgICAgVXNlclNlcnZpY2UubG9naW4oZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihyZXMpIHtcblxuICAgICAgICAgICRsb2NhbFN0b3JhZ2UuYWN0aXZlVXNlciA9IHJlcy51c2VyO1xuICAgICAgICAgICRsb2NhbFN0b3JhZ2UudXNlclRva2VuID0gcmVzLnRva2VuO1xuICAgICAgICAgICRyb290U2NvcGUuZGlzcGxheVN0YXR1cyhyZXMubWVzc2FnZSk7XG4gICAgICAgICAgJHN0YXRlLmdvKCd1c2VyaG9tZScpO1xuICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLmRpc3BsYXlFcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogW3NpZ251cDogcmVnaXN0ZXIgYSBuZXcgdXNlciBhbmQgcmVkaXJlY3RcbiAgICAgICAqICB0byBsb2dpbiBwYWdlIGlmIHN1Y2Nlc3NmdWxdXG4gICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFtzdGF0dXMgbWVzc2FnZV1cbiAgICAgICAqL1xuICAgICAgJHNjb3BlLnNpZ251cCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICBmaXJzdDogJHNjb3BlLmZpcnN0bmFtZSxcbiAgICAgICAgICAgIGxhc3Q6ICRzY29wZS5sYXN0bmFtZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdXNlcm5hbWU6ICRzY29wZS51c2VybmFtZSxcbiAgICAgICAgICBlbWFpbDogJHNjb3BlLmVtYWlsLFxuICAgICAgICAgIHBhc3N3b3JkOiAkc2NvcGUucGFzc3dvcmRcbiAgICAgICAgfTtcbiAgICAgICAgVXNlclNlcnZpY2Uuc2lnbnVwKGRhdGEpLnN1Y2Nlc3MoXG4gICAgICAgICAgZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmRpc3BsYXlTdGF0dXMocmVzLm1lc3NhZ2UpO1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xuICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICRyb290U2NvcGUuZGlzcGxheUVycm9yKGVyci5tZXNzYWdlICsgJyB0cnksIGFnYWluJyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBbbG9nb3V0OiBsb2cgb3V0IGEgdXNlciwgZGVsZXRlIHRva2VuIGZyb20gc3RvcmFnZVxuICAgICAgICogYW5kIHJlZGlyZWN0IHRvIGxhbmRpbmcgcGFnZV1cbiAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gW3N0YXR1cyBtZXNzYWdlXVxuICAgICAgICovXG4gICAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLy9yZW1vdmUgYWxsIGRhdGEvdG9rZW4gZnJvbSBsb2NhbCBzdG9yYWdlXG4gICAgICAgICRsb2NhbFN0b3JhZ2UuJHJlc2V0KCk7XG4gICAgICAgIFVzZXJTZXJ2aWNlLmxvZ291dCgpLnN1Y2Nlc3MoXG4gICAgICAgICAgZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmRpc3BsYXlTdGF0dXMocmVzLm1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAvL3JlZGlyZWN0IHRvIHVzZXIgaG9tZVxuICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS5kaXNwbGF5RXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogW2dldFVzZXJEZXRhaWxzIGdldCBwcm9maWxlIGRldGFpbHMgb2YgYSBcbiAgICAgICAqIGxvZ2dlZCBpbiB1c2VyXVxuICAgICAgICogQHJldHVybiB7b2JqZWN0fSBbdXNlciBkZXRhaWxzIG9yIGVycm9yIG1lc3NhZ2VdXG4gICAgICAgKi9cbiAgICAgICRyb290U2NvcGUuZ2V0VXNlckRldGFpbHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHVzZXJJZCA9ICRsb2NhbFN0b3JhZ2UuYWN0aXZlVXNlci5faWQ7XG5cbiAgICAgICAgVXNlclNlcnZpY2UuZ2V0VXNlcih1c2VySWQpLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzKSB7XG5cbiAgICAgICAgICAkc2NvcGUudXNlckRldGFpbHMgPSByZXM7XG4gICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICRyb290U2NvcGUuZGlzcGxheUVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIFtkZWxldGVVc2VyIGRlbGV0ZSBhIHVzZXIgYWNjb3VudF1cbiAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gW3N0YXR1cyBtZXNzYWdlXVxuICAgICAgICovXG4gICAgICAkc2NvcGUuZGVsZXRlVXNlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaWQgPSAkbG9jYWxTdG9yYWdlLmFjdGl2ZVVzZXIuX2lkO1xuICAgICAgICBVc2VyU2VydmljZS5kZWxldGVVc2VyKGlkKS5zdWNjZXNzKFxuICAgICAgICAgIGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgJHJvb3RTY29wZS5kaXNwbGF5U3RhdHVzKHJlcy5tZXNzYWdlKTtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICRyb290U2NvcGUuZGlzcGxheUVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUudG9nZ2xlU2lkZU5hdiA9IGZ1bmN0aW9uKElkKSB7XG4gICAgICAgICRtZFNpZGVuYXYoSWQpLnRvZ2dsZSgpO1xuXG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIFt1cGRhdGVVc2VyOiB1cGRhdGUgYSB1c2VyIHByb2ZpbGVdXG4gICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFtzdGF0dXMgbWVzc2FnZV1cbiAgICAgICAqL1xuICAgICAgJHNjb3BlLnVwZGF0ZVVzZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGlkID0gJGxvY2FsU3RvcmFnZS5hY3RpdmVVc2VyLl9pZDtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgdXNlcm5hbWU6ICRzY29wZS51c2VyRGV0YWlscy51c2VybmFtZSxcbiAgICAgICAgICBlbWFpbDogJHNjb3BlLnVzZXJEZXRhaWxzLmVtYWlsLFxuICAgICAgICAgIHBhc3N3b3JkOiAkc2NvcGUudXNlckRldGFpbHMucGFzc3dvcmQsXG4gICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgZmlyc3Q6ICRzY29wZS51c2VyRGV0YWlscy5uYW1lLmZpcnN0LFxuICAgICAgICAgICAgbGFzdDogJHNjb3BlLnVzZXJEZXRhaWxzLm5hbWUubGFzdFxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVXNlclNlcnZpY2UudXBkYXRlVXNlckRhdGEoaWQsIGRhdGEpLnN1Y2Nlc3MoXG4gICAgICAgICAgZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmRpc3BsYXlTdGF0dXMocmVzLm1lc3NhZ2UpO1xuICAgICAgICAgICAgJHN0YXRlLnJlbG9hZCgndXNlcmhvbWUnKTtcbiAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLmRpc3BsYXlFcnJvcihlcnIubWVzc2FnZSArICcgdHJ5LCBhZ2FpbicpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS5yZWRpcmVjdCA9IGZ1bmN0aW9uKHBhZ2UpIHtcbiAgICAgICAgcmV0dXJuICRzdGF0ZS5nbyhwYWdlKTtcbiAgICAgIH07XG5cbiAgICB9XG4gIF0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnZG9jdW1lbnRNYW5hZ2VyQXBwJyk7XG5cbmFwcC5mYWN0b3J5KCdkb2NTZXJ2aWNlJywgWyckaHR0cCcsICdiYXNlVXJsJywgZnVuY3Rpb24oJGh0dHAsIGJhc2VVcmwpIHtcblxuICAgIHZhciBEb2N1bWVudCA9IHtcblxuICAgICAgLyoqXG4gICAgICAgKiBbYWRkRG9jdW1lbnQgc2VuZCBhIG5ldyBkb2N1bWVudCB0byBiYWNrZW5kXVxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgW2RvY3VtZW50IGRldGFpbHNdXG4gICAgICAgKi9cbiAgICAgIGFkZERvY3VtZW50OiBmdW5jdGlvbihkYXRhKSB7XG5cbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVybCArICcvYXBpL2RvY3VtZW50cycsIGRhdGEpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBbZ2V0QWxsRG9jdW1lbnRzOiByZXF1ZXN0IGZvciBhbGwgZG9jdW1lbnQgZnJvbSBiYWNrZW5kXVxuICAgICAgICovXG4gICAgICBnZXRBbGxEb2N1bWVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KGJhc2VVcmwgKyAnL2FwaS9kb2N1bWVudHMnKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogW2dldE9uZURvY3VtZW50IGdldCBhIG5ldyBkb2N1bWVudCBmcm9tIGJhY2tlbmRdXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgW2RvY3VtZW50IGlkXVxuICAgICAgICovXG4gICAgICBnZXRPbmVEb2N1bWVudDogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldChiYXNlVXJsICsgJy9hcGkvZG9jdW1lbnRzLycgKyBpZCk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIFtnZXRBbGxVc2VyRG9jdW1lbnRzIHJlcXVlc3QgZm9yIGFsbCBkb2N1bWVudHNcbiAgICAgICAqIGJlbG9uZ2luZyB0byBhIHVzZXIgZnJvbSBiYWNrZW5kXVxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCBbdXNlciBJZF1cbiAgICAgICAqL1xuICAgICAgZ2V0QWxsVXNlckRvY3VtZW50czogZnVuY3Rpb24odXNlcklkKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoYmFzZVVybCArICcvYXBpL3VzZXJzLycgKyB1c2VySWQgKyAnL2RvY3VtZW50cycpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBbdXBkYXRlRG9jdW1lbnQ6IHNlbmRzIHJlcXVlc3QgdG8gdXBkYXRlIGRldGFpbHMgb2YgYSBkb2N1bWVudF1cbiAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gaWQgICBbZG9jdW1lbnQgaWRdXG4gICAgICAgKiBAcGFyYW0gIHtvYmplY3R9IGRhdGEgW25ldyBkb2N1bWVudCBkZXRhaWxzXVxuICAgICAgICovXG4gICAgICB1cGRhdGVEb2N1bWVudDogZnVuY3Rpb24oaWQsIGRhdGEpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLnB1dChiYXNlVXJsICsgJy9hcGkvZG9jdW1lbnRzLycgKyBpZCwgZGF0YSk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIFtkZWxldGVEb2N1bWVudDogc2VuZHMgcmVxdWVzdCB0byByZW1vdmUgYSBkb2N1bWVudF1cbiAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gaWQgICBbZG9jdW1lbnQgaWRdXG4gICAgICAgKi9cbiAgICAgIGRlbGV0ZURvY3VtZW50OiBmdW5jdGlvbihpZCkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKGJhc2VVcmwgKyAnL2FwaS9kb2N1bWVudHMvJyArIGlkKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIERvY3VtZW50O1xuXG4gIH1cblxuXG5dKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2RvY3VtZW50TWFuYWdlckFwcCcpO1xuXG5hcHAudmFsdWUoJ2Jhc2VVcmwnLCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJyk7XG5cbmFwcC5mYWN0b3J5KCdVc2VyU2VydmljZScsIFsnJGh0dHAnLCAnYmFzZVVybCcsIGZ1bmN0aW9uKCRodHRwLCBiYXNlVXJsKSB7XG5cbiAgdmFyIFVzZXIgPSB7XG5cbiAgICAvKipcbiAgICAgKiBbbG9naW46IHNlbmRzIHJlcXVlc3QgdG8gbG9nIGluIGEgdXNlcl1cbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IGRhdGEgW3VzZXIgZGV0YWlsc11cbiAgICAgKi9cbiAgICBsb2dpbjogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVybCArICcvYXBpL3VzZXJzL2xvZ2luJywgZGF0YSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFtsb2dvdXQ6IHNlbmRzIHJlcXVlc3QgdG8gbG9nb3V0IGEgdXNlcl1cbiAgICAgKi9cbiAgICBsb2dvdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVybCArICcvYXBpL3VzZXJzL2xvZ291dCcpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBbc2lnbnVwOiBzZW5kcyByZXF1ZXN0IHRvIHN0b3JlIGEgbmV3IFxuICAgICAqIHVzZXIgdG8gdGhlIGJhY2tlbmRdXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBkYXRhIFtuZXcgdXNlciBkZXRhaWxzXVxuICAgICAqL1xuICAgIHNpZ251cDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVybCArICcvYXBpL3VzZXJzLycsIGRhdGEpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBbZ2V0VXNlcjogc2VuZHMgcmVxdWVzdCB0byBnZXQgdGhlXG4gICAgICogIGRldGFpbHMgb2YgYSBsb2dnZWQgaW4gdXNlcl1cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGlkIFt1c2VyIElkXVxuICAgICAqL1xuICAgIGdldFVzZXI6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KGJhc2VVcmwgKyAnL2FwaS91c2Vycy8nICsgaWQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBbdXBkYXRlVXNlckRhdGE6IHNlbmRzIHJlcXVlc3QgdG8gdXBkYXRlIFxuICAgICAqIHRoZSBwcm9maWxlIG9mIGEgdXNlcl1cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGlkICAgW3VzZXIgSWRdXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBkYXRhIFtuZXcgdXNlciBkZXRhaWxzXVxuICAgICAqL1xuICAgIHVwZGF0ZVVzZXJEYXRhOiBmdW5jdGlvbihpZCwgZGF0YSkge1xuICAgICAgcmV0dXJuICRodHRwLnB1dChiYXNlVXJsICsgJy9hcGkvdXNlcnMvJyArIGlkLCBkYXRhKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogW2RlbGV0ZVVzZXI6IHNlbmRzIHJlcXVlc3QgdG8gcmVtb3ZlIGEgdXNlcl1cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGlkIFt1c2VyIElkXVxuICAgICAqL1xuICAgIGRlbGV0ZVVzZXI6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKGJhc2VVcmwgKyAnL2FwaS91c2Vycy8nICsgaWQpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gVXNlcjtcbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
